{% extends "Admin_dashboard_layout.html" %} 

{% block body %}
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"/>
  <link rel="stylesheet" href="{{ url_for('static', filename='departments.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='add_form.css') }}" />

<div class="main-container">
  <div class="top-bar">
    <h2 class="page-title">All Departments</h2>

    <div class="top-actions">
      <button type="button" class="btn btn-export">
        <i class="fas fa-file-export"></i> Export List
      </button>

      <button type="button" class="btn btn-add" onclick="showAddDeptModal()">
        <i class="fas fa-plus"></i> Add Department
      </button>
    </div>
  </div>

  <div class="content-card">
    <div class="table-responsive">
      <table class="styled-table">
        <thead>
          <tr>
            <th>Department Name</th>
            <th>Number of Teachers</th>
            <th>Number of Subjects</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for department in departments %}
          <tr>
            <td>
              <div class="dept-flex">
                <div class="icon blue"><i class="fas fa-university"></i></div>
                <div>
                  <div class="name">{{ department.department_name }}</div>
                  <div class="sub">{{ department.department_code }}</div>
                </div>
              </div>
            </td>
            <td><span class="tag blue">{{ department.total_teachers }} Teachers</span></td>
            <td><span class="tag purple">{{ department.total_subjects }} Subjects</span></td>
            <td class="actions">
              <i class="fas fa-eye view" title="View"></i>
              <i class="fas fa-edit edit" title="Edit" onclick="editDepartment(this)"></i>
              <i class="fas fa-trash delete" title="Delete" onclick="deleteItem(this)"></i>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="modal" id="addDeptModal">
  <div class="modal-content">
    <div class="modal-header">
      <h3 id="modalTitle">Add Department</h3>
      <span class="close-btn" id="closeModal" onclick="closeDeptModal()">&times;</span>
    </div>

    <form id="addDepartmentForm" class="modal-form" method="POST" action="{{ url_for('add_department') }}">
      <div class="form-group">
        <label>Department Name</label>
        <input type="text" id="deptName" name="department_name" placeholder="e.g Computer Science" required>
      </div>

      <div class="form-group">
        <label>Department Code</label>
        <input type="text" id="deptCode" name="department_code" placeholder="e.g CS" required>
      </div>

      <div class="form-group">
        <label>Total Teachers</label>
        <input type="number" id="totalTeachers" name="total_teachers" placeholder="e.g 12" required>
      </div>

      <div class="form-group">
        <label>Total Subjects</label>
        <input type="number" id="totalSubjects" name="total_subjects" placeholder="e.g 8" required>
      </div>

      <div class="modal-actions">
        <button type="button" class="btn cancel-btn" id="cancelModal" onclick="closeDeptModal()">Cancel</button>
        <button type="submit" class="btn btn-add">Save Department</button>
      </div>
    </form>
  </div>
</div>

<script src="{{ url_for('static', filename='departments.js') }}"></script>

{% endblock %}